<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="SimonXie的博客">
    <meta name="keyword"  content="SimonXie">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        archlinux lnmp 一键安装傻瓜脚本0.0.1 - SimonXie的博客 | SimonXie&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Simon Xie" type="application/atom+xml">
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> All magic comes with a price. </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>Simon Xie</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>HOME</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>TAGS</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>ARCHIVES</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>ABOUT</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>SEARCH</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">search</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> All magic comes with a price. </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        archlinux lnmp 一键安装傻瓜脚本0.0.1
    </div>

    <div class="post-meta">
        <span class="attr">Post：<span>2012-11-20 15:21:30</span></span>
        
        <span class="attr">Tags：/
        
        <a class="tag" href="/tags/#linux" title="linux">linux</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#archlinux" title="archlinux">archlinux</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">Visit：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <p>写在前边：</p>
<p>以前安装lnmp总是一个一个安装很耗时而且经常出错，于是在网上搜啊搜的，搜不到一个适合arch安装的一键傻瓜安装脚本，于是在网上搜索了一个其他系统的稍作修改而成。</p>
<p>本脚本是按照<a target="_blank" rel="noopener" href="http://www.lnmp.org中centos.sh修改而成.所用软件全部为源码安装/">http://www.lnmp.org中centos.sh修改而成。所用软件全部为源码安装</a></p>
<p>因为是源码安装所以基本上之需要把启动脚本的位置init.d替换为arch中的rc.d即可。</p>
<p>编译的时候mysql可能会比较耗时，推荐替换pacman安装。再去掉相应的设置即可。</p>
<p>codewalker@codehost:&#x2F;tmp&#x2F;lnmp0.9</p>
<p>$ cat archos.sh </p>
<p>#!&#x2F;bin&#x2F;bash</p>
<p>PATH&#x3D;&#x2F;bin:&#x2F;sbin:&#x2F;usr&#x2F;bin:&#x2F;usr&#x2F;sbin:&#x2F;usr&#x2F;local&#x2F;bin:&#x2F;usr&#x2F;local&#x2F;sbin:~&#x2F;bin</p>
<p>export PATH</p>
<p># Check if user is root</p>
<p>if [ $(id -u) !&#x3D; “0” ]; then</p>
<p>    echo “Error: You must be root to run this script, please use root to install lnmp”</p>
<p>    exit 1</p>
<p>fi</p>
<p>clear</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>echo “LNMP V0.0.1 for Archlinux base on Licess Written by codewalkertse”</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>echo “A tool to auto-compile &amp; install Nginx+MySQL+PHP on Linux “</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>cur_dir&#x3D;$(pwd)</p>
<p>if [ “$1” !&#x3D; “–help” ]; then</p>
<p>#set main domain name</p>
<p>domain&#x3D;”<a target="_blank" rel="noopener" href="http://www.lnmp.org/">www.lnmp.org</a>“</p>
<p>echo “Please input domain:”</p>
<p>read -p “(Default domain: <a target="_blank" rel="noopener" href="http://www.lnmp.org/">www.lnmp.org</a>):” domain</p>
<p>if [ “$domain” &#x3D; “” ]; then</p>
<p>domain&#x3D;”<a target="_blank" rel="noopener" href="http://www.lnmp.org/">www.lnmp.org</a>“</p>
<p>fi</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>echo domain&#x3D;”$domain”</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>#set mysql root password</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>mysqlrootpwd&#x3D;”root”</p>
<p>echo “Please input the root password of mysql:”</p>
<p>read -p “(Default password: root):” mysqlrootpwd</p>
<p>if [ “$mysqlrootpwd” &#x3D; “” ]; then</p>
<p>mysqlrootpwd&#x3D;”root”</p>
<p>fi</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>echo mysqlrootpwd&#x3D;”$mysqlrootpwd”</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>#do you want to install the InnoDB Storage Engine?</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>installinnodb&#x3D;”n”</p>
<p>echo “Do you want to install the InnoDB Storage Engine?”</p>
<p>read -p “(Default no,if you want please input: y ,if not please press the enter button):” installinnodb</p>
<p>case “$installinnodb” in</p>
<p>y|Y|Yes|YES|yes|yES|yEs|YeS|yeS)</p>
<p>echo “You will install the InnoDB Storage Engine”</p>
<p>installinnodb&#x3D;”y”</p>
<p>;;</p>
<p>n|N|No|NO|no|nO)</p>
<p>echo “You will NOT install the InnoDB Storage Engine!”</p>
<p>installinnodb&#x3D;”n”</p>
<p>;;</p>
<p>*)</p>
<p>echo “INPUT error,The InnoDB Storage Engine will NOT install!”</p>
<p>installinnodb&#x3D;”n”</p>
<p>esac</p>
<p>get_char()</p>
<p>{</p>
<p>SAVEDSTTY&#x3D;`stty -g`</p>
<p>stty -echo</p>
<p>stty cbreak</p>
<p>dd if&#x3D;&#x2F;dev&#x2F;tty bs&#x3D;1 count&#x3D;1 2&gt; &#x2F;dev&#x2F;null</p>
<p>stty -raw</p>
<p>stty echo</p>
<p>stty $SAVEDSTTY</p>
<p>}</p>
<p>echo “”</p>
<p>echo “Press any key to start…”</p>
<p>char&#x3D;`get_char`</p>
<p>#Set timezone</p>
<p>pacman -R httpd*</p>
<p>pacman -R php*</p>
<p>pacman -R mysql-server mysql</p>
<p>pacman -R php-mysql</p>
<p>pacman -Syu</p>
<p>#Disable SeLinux</p>
<p>if [ -s &#x2F;etc&#x2F;selinux&#x2F;config ]; then</p>
<p>sed -i ‘s&#x2F;SELINUX&#x3D;enforcing&#x2F;SELINUX&#x3D;disabled&#x2F;g’ &#x2F;etc&#x2F;selinux&#x2F;config</p>
<p>fi</p>
<p>for packages in patch make gcc gcc-c++ gcc-g77 flex bison file libtool libtool-libs autoconf kernel-devel libjpeg libjpeg-devel libpng libpng-devel libpng10 libpng10-devel gd gd-devel freetype freetype-devel libxml2 libxml2-devel zlib zlib-devel glib2 glib2-devel bzip2 bzip2-devel libevent libevent-devel ncurses ncurses-devel curl curl-devel e2fsprogs e2fsprogs-devel krb5 krb5-devel libidn libidn-devel openssl openssl-devel vim-minimal nano fonts-chinese gettext gettext-devel ncurses-devel gmp-devel pspell-devel unzip libcap;</p>
<p>do pacman -S $packages; done</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;check files&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>if [ -s php-5.2.17.tar.gz ]; then</p>
<p>  echo “php-5.2.17.tar.gz [found]“</p>
<p>  else</p>
<p>  echo “Error: php-5.2.17.tar.gz not found!!!download now……”</p>
<p>  wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/web/php/php-5.2.17.tar.gz">http://soft.vpser.net/web/php/php-5.2.17.tar.gz</a></p>
<p>fi</p>
<p>if [ -s php-5.2.17-fpm-0.5.14.diff.gz ]; then</p>
<p>  echo “php-5.2.17-fpm-0.5.14.diff.gz [found]“</p>
<p>  else</p>
<p>  echo “Error: php-5.2.17-fpm-0.5.14.diff.gz not found!!!download now……”</p>
<p>  wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/web/phpfpm/php-5.2.17-fpm-0.5.14.diff.gz">http://soft.vpser.net/web/phpfpm/php-5.2.17-fpm-0.5.14.diff.gz</a></p>
<p>fi</p>
<p>if [ -s memcache-3.0.6.tgz ]; then</p>
<p>  echo “memcache-3.0.6.tgz [found]“</p>
<p>  else</p>
<p>  echo “Error: memcache-3.0.6.tgz not found!!!download now……”</p>
<p>  wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/web/memcache/memcache-3.0.6.tgz">http://soft.vpser.net/web/memcache/memcache-3.0.6.tgz</a></p>
<p>fi</p>
<p>if [ -s pcre-8.12.tar.gz ]; then</p>
<p>  echo “pcre-8.12.tar.gz [found]“</p>
<p>  else</p>
<p>  echo “Error: pcre-8.12.tar.gz not found!!!download now……”</p>
<p>  wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/web/pcre/pcre-8.12.tar.gz">http://soft.vpser.net/web/pcre/pcre-8.12.tar.gz</a></p>
<p>fi</p>
<p>if [ -s nginx-1.0.15.tar.gz ]; then</p>
<p>  echo “nginx-1.0.15.tar.gz [found]“</p>
<p>  else</p>
<p>  echo “Error: nginx-1.0.15.tar.gz not found!!!download now……”</p>
<p>  wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/web/nginx/nginx-1.0.15.tar.gz">http://soft.vpser.net/web/nginx/nginx-1.0.15.tar.gz</a></p>
<p>fi</p>
<p>if [ -s mysql-5.1.60.tar.gz ]; then</p>
<p>  echo “mysql-5.1.60.tar.gz [found]“</p>
<p>  else</p>
<p>  echo “Error: mysql-5.1.60.tar.gz not found!!!download now……”</p>
<p>  wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/datebase/mysql/mysql-5.1.60.tar.gz">http://soft.vpser.net/datebase/mysql/mysql-5.1.60.tar.gz</a></p>
<p>fi</p>
<p>if [ -s libiconv-1.14.tar.gz ]; then</p>
<p>  echo “libiconv-1.14.tar.gz [found]“</p>
<p>  else</p>
<p>  echo “Error: libiconv-1.14.tar.gz not found!!!download now……”</p>
<p>  wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/web/libiconv/libiconv-1.14.tar.gz">http://soft.vpser.net/web/libiconv/libiconv-1.14.tar.gz</a></p>
<p>fi</p>
<p>if [ -s libmcrypt-2.5.8.tar.gz ]; then</p>
<p>  echo “libmcrypt-2.5.8.tar.gz [found]“</p>
<p>  else</p>
<p>  echo “Error: libmcrypt-2.5.8.tar.gz not found!!!download now……”</p>
<p>  wget -c  <a target="_blank" rel="noopener" href="http://soft.vpser.net/web/libmcrypt/libmcrypt-2.5.8.tar.gz">http://soft.vpser.net/web/libmcrypt/libmcrypt-2.5.8.tar.gz</a></p>
<p>fi</p>
<p>if [ -s mhash-0.9.9.9.tar.gz ]; then</p>
<p>  echo “mhash-0.9.9.9.tar.gz [found]“</p>
<p>  else</p>
<p>  echo “Error: mhash-0.9.9.9.tar.gz not found!!!download now……”</p>
<p>  wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/web/mhash/mhash-0.9.9.9.tar.gz">http://soft.vpser.net/web/mhash/mhash-0.9.9.9.tar.gz</a></p>
<p>fi</p>
<p>if [ -s mcrypt-2.6.8.tar.gz ]; then</p>
<p>  echo “mcrypt-2.6.8.tar.gz [found]“</p>
<p>  else</p>
<p>  echo “Error: mcrypt-2.6.8.tar.gz not found!!!download now……”</p>
<p>  wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/web/mcrypt/mcrypt-2.6.8.tar.gz">http://soft.vpser.net/web/mcrypt/mcrypt-2.6.8.tar.gz</a></p>
<p>fi</p>
<p>if [ -s phpmyadmin-latest.tar.gz ]; then</p>
<p>  echo “phpmyadmin-latest.tar.gz [found]“</p>
<p>  else</p>
<p>  echo “Error: phpmyadmin-latest.tar.gz not found!!!download now……”</p>
<p>  wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/datebase/phpmyadmin/phpmyadmin-latest.tar.gz">http://soft.vpser.net/datebase/phpmyadmin/phpmyadmin-latest.tar.gz</a></p>
<p>fi</p>
<p>if [ -s p.tar.gz ]; then</p>
<p>  echo “p.tar.gz [found]“</p>
<p>  else</p>
<p>  echo “Error: p.tar.gz not found!!!download now……”</p>
<p>  wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/prober/p.tar.gz">http://soft.vpser.net/prober/p.tar.gz</a></p>
<p>fi</p>
<p>if [ -s autoconf-2.13.tar.gz ]; then</p>
<p>  echo “autoconf-2.13.tar.gz [found]“</p>
<p>  else</p>
<p>  echo “Error: autoconf-2.13.tar.gz not found!!!download now……”</p>
<p>  wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/lib/autoconf/autoconf-2.13.tar.gz">http://soft.vpser.net/lib/autoconf/autoconf-2.13.tar.gz</a></p>
<p>fi</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;check files&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>cd $cur_dir</p>
<p>tar zxvf autoconf-2.13.tar.gz</p>
<p>cd autoconf-2.13&#x2F;</p>
<p>.&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;autoconf-2.13</p>
<p>make &amp;&amp; make install</p>
<p>cd ..&#x2F;</p>
<p>tar zxvf libiconv-1.14.tar.gz</p>
<p>cd libiconv-1.14&#x2F;</p>
<p>.&#x2F;configure</p>
<p>make &amp;&amp; make install</p>
<p>cd ..&#x2F;</p>
<p>cd $cur_dir</p>
<p>tar zxvf libmcrypt-2.5.8.tar.gz</p>
<p>cd libmcrypt-2.5.8&#x2F;</p>
<p>.&#x2F;configure</p>
<p>make &amp;&amp; make install</p>
<p>&#x2F;sbin&#x2F;ldconfig</p>
<p>cd libltdl&#x2F;</p>
<p>.&#x2F;configure –enable-ltdl-install</p>
<p>make &amp;&amp; make install</p>
<p>cd ..&#x2F;..&#x2F;</p>
<p>cd $cur_dir</p>
<p>tar zxvf mhash-0.9.9.9.tar.gz</p>
<p>cd mhash-0.9.9.9&#x2F;</p>
<p>.&#x2F;configure</p>
<p>make &amp;&amp; make install</p>
<p>cd ..&#x2F;</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libmcrypt.la &#x2F;usr&#x2F;lib&#x2F;libmcrypt.la</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libmcrypt.so &#x2F;usr&#x2F;lib&#x2F;libmcrypt.so</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libmcrypt.so.4 &#x2F;usr&#x2F;lib&#x2F;libmcrypt.so.4</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libmcrypt.so.4.4.8 &#x2F;usr&#x2F;lib&#x2F;libmcrypt.so.4.4.8</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libmhash.a &#x2F;usr&#x2F;lib&#x2F;libmhash.a</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libmhash.la &#x2F;usr&#x2F;lib&#x2F;libmhash.la</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libmhash.so &#x2F;usr&#x2F;lib&#x2F;libmhash.so</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libmhash.so.2 &#x2F;usr&#x2F;lib&#x2F;libmhash.so.2</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;lib&#x2F;libmhash.so.2.0.1 &#x2F;usr&#x2F;lib&#x2F;libmhash.so.2.0.1</p>
<p>cd $cur_dir</p>
<p>tar zxvf mcrypt-2.6.8.tar.gz</p>
<p>cd mcrypt-2.6.8&#x2F;</p>
<p>.&#x2F;configure</p>
<p>make &amp;&amp; make install</p>
<p>cd ..&#x2F;</p>
<p>if [ `getconf WORD_BIT` &#x3D; ‘32’ ] &amp;&amp; [ `getconf LONG_BIT` &#x3D; ‘64’ ] ; then</p>
<p>        ln -s &#x2F;usr&#x2F;lib64&#x2F;libpng.* &#x2F;usr&#x2F;lib&#x2F;</p>
<p>        ln -s &#x2F;usr&#x2F;lib64&#x2F;libjpeg.* &#x2F;usr&#x2F;lib&#x2F;</p>
<p>fi</p>
<p>ulimit -v unlimited</p>
<p>if [ ! <code>grep -l &quot;/lib&quot;    &#39;/etc/ld.so.conf&#39;</code> ]; then</p>
<p>echo “&#x2F;lib” &gt;&gt; &#x2F;etc&#x2F;ld.so.conf</p>
<p>fi</p>
<p>if [ ! <code>grep -l &#39;/usr/lib&#39;    &#39;/etc/ld.so.conf&#39;</code> ]; then</p>
<p>echo “&#x2F;usr&#x2F;lib” &gt;&gt; &#x2F;etc&#x2F;ld.so.conf</p>
<p>fi</p>
<p>if [ -d “&#x2F;usr&#x2F;lib64” ] &amp;&amp; [ ! <code>grep -l &#39;/usr/lib64&#39;    &#39;/etc/ld.so.conf&#39;</code> ]; then</p>
<p>echo “&#x2F;usr&#x2F;lib64” &gt;&gt; &#x2F;etc&#x2F;ld.so.conf</p>
<p>fi</p>
<p>if [ ! <code>grep -l &#39;/usr/local/lib&#39;    &#39;/etc/ld.so.conf&#39;</code> ]; then</p>
<p>echo “&#x2F;usr&#x2F;local&#x2F;lib” &gt;&gt; &#x2F;etc&#x2F;ld.so.conf</p>
<p>fi</p>
<p>ldconfig</p>
<p>cat &gt;&gt;&#x2F;etc&#x2F;security&#x2F;limits.conf&lt;&lt;eof</p>
<p>* soft nproc 65535</p>
<p>* hard nproc 65535</p>
<p>* soft nofile 65535</p>
<p>* hard nofile 65535</p>
<p>eof</p>
<p>cat &gt;&gt;&#x2F;etc&#x2F;sysctl.conf&lt;&lt;eof</p>
<p>fs.file-max&#x3D;65535</p>
<p>eof</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;mysql install&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>cd $cur_dir</p>
<p>tar zxvf mysql-5.1.60.tar.gz</p>
<p>cd mysql-5.1.60&#x2F;</p>
<p>if [ $installinnodb &#x3D; “y” ]; then</p>
<p>.&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql –with-extra-charsets&#x3D;complex –enable-thread-safe-client –enable-assembler –with-mysqld-ldflags&#x3D;-all-static –with-charset&#x3D;utf8 –enable-thread-safe-client –with-big-tables –with-readline –with-ssl –with-embedded-server –enable-local-infile –with-plugins&#x3D;innobase</p>
<p>else</p>
<p>.&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql –with-extra-charsets&#x3D;complex –enable-thread-safe-client –enable-assembler –with-mysqld-ldflags&#x3D;-all-static –with-charset&#x3D;utf8 –enable-thread-safe-client –with-big-tables –with-readline –with-ssl –with-embedded-server –enable-local-infile</p>
<p>fi</p>
<p>make &amp;&amp; make install</p>
<p>cd ..&#x2F;</p>
<p>groupadd mysql</p>
<p>useradd -s &#x2F;sbin&#x2F;nologin -M -g mysql mysql</p>
<p>cp &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;share&#x2F;mysql&#x2F;my-medium.cnf &#x2F;etc&#x2F;my.cnf</p>
<p>sed -i ‘s&#x2F;skip-locking&#x2F;skip-external-locking&#x2F;g’ &#x2F;etc&#x2F;my.cnf</p>
<p>if [ $installinnodb &#x3D; “y” ]; then</p>
<p>sed -i ‘s:#innodb:innodb:g’ &#x2F;etc&#x2F;my.cnf</p>
<p>fi</p>
<p>&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql_install_db –user&#x3D;mysql</p>
<p>chown -R mysql &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;var</p>
<p>chgrp -R mysql &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;.</p>
<p>cp &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;share&#x2F;mysql&#x2F;mysql.server &#x2F;etc&#x2F;rc.d&#x2F;mysql</p>
<p>chmod 755 &#x2F;etc&#x2F;rc.d&#x2F;mysql</p>
<p>cat &gt; &#x2F;etc&#x2F;ld.so.conf.d&#x2F;mysql.conf&lt;&lt;EOF</p>
<p>&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;lib&#x2F;mysql</p>
<p>&#x2F;usr&#x2F;local&#x2F;lib</p>
<p>EOF</p>
<p>ldconfig</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;lib&#x2F;mysql &#x2F;usr&#x2F;lib&#x2F;mysql</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;include&#x2F;mysql &#x2F;usr&#x2F;include&#x2F;mysql</p>
<p>&#x2F;etc&#x2F;rc.d&#x2F;mysql start</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql &#x2F;usr&#x2F;bin&#x2F;mysql</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqldump &#x2F;usr&#x2F;bin&#x2F;mysqldump</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;myisamchk &#x2F;usr&#x2F;bin&#x2F;myisamchk</p>
<p>&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysqladmin -u root password $mysqlrootpwd</p>
<p>cat &gt; &#x2F;tmp&#x2F;mysql_sec_script&lt;&lt;EOF</p>
<p>use mysql;</p>
<p>update user set password&#x3D;password(‘$mysqlrootpwd’) where user&#x3D;’root’;</p>
<p>delete from user where not (user&#x3D;’root’) ;</p>
<p>delete from user where user&#x3D;’root’ and password&#x3D;’’; </p>
<p>drop database test;</p>
<p>DROP USER ‘‘@’%’;</p>
<p>flush privileges;</p>
<p>EOF</p>
<p>&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql -u root -p$mysqlrootpwd -h localhost &lt; &#x2F;tmp&#x2F;mysql_sec_script</p>
<p>rm -f &#x2F;tmp&#x2F;mysql_sec_script</p>
<p>&#x2F;etc&#x2F;rc.d&#x2F;mysql restart</p>
<p>&#x2F;etc&#x2F;rc.d&#x2F;mysql stop</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;mysql intall completed&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;php+eaccelerator install&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>cd $cur_dir</p>
<p>export PHP_AUTOCONF&#x3D;&#x2F;usr&#x2F;local&#x2F;autoconf-2.13&#x2F;bin&#x2F;autoconf</p>
<p>export PHP_AUTOHEADER&#x3D;&#x2F;usr&#x2F;local&#x2F;autoconf-2.13&#x2F;bin&#x2F;autoheader</p>
<p>tar zxvf php-5.2.17.tar.gz</p>
<p>gzip -cd php-5.2.17-fpm-0.5.14.diff.gz | patch -d php-5.2.17 -p1</p>
<p>cd php-5.2.17&#x2F;</p>
<p>wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/web/php/bug/php-5.2.17-max-input-vars.patch">http://soft.vpser.net/web/php/bug/php-5.2.17-max-input-vars.patch</a></p>
<p>patch -p1 &lt; php-5.2.17-max-input-vars.patch</p>
<p>.&#x2F;buildconf –force</p>
<p>.&#x2F;configure –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;php –with-config-file-path&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;etc –with-mysql&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql –with-mysqli&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin&#x2F;mysql_config –with-iconv-dir –with-freetype-dir –with-jpeg-dir –with-png-dir –with-zlib –with-libxml-dir&#x3D;&#x2F;usr –enable-xml –disable-rpath –enable-discard-path –enable-magic-quotes –enable-safe-mode –enable-bcmath –enable-shmop –enable-sysvsem –enable-inline-optimization –with-curl –with-curlwrappers –enable-mbregex –enable-fastcgi –enable-fpm –enable-force-cgi-redirect –enable-mbstring –with-mcrypt –enable-ftp –with-gd –enable-gd-native-ttf –with-openssl –with-mhash –enable-pcntl –enable-sockets –with-xmlrpc –enable-zip –enable-soap –without-pear –with-gettext –with-mime-magic </p>
<p>make ZEND_EXTRA_LIBS&#x3D;’-liconv’</p>
<p>make install</p>
<p>mkdir -p &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc</p>
<p>cp php.ini-dist &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php.ini</p>
<p>cd ..&#x2F;</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;php &#x2F;usr&#x2F;bin&#x2F;php</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;phpize &#x2F;usr&#x2F;bin&#x2F;phpize</p>
<p>ln -s &#x2F;usr&#x2F;local&#x2F;php&#x2F;sbin&#x2F;php-fpm &#x2F;usr&#x2F;bin&#x2F;php-fpm</p>
<p>cd $cur_dir</p>
<p>tar zxvf memcache-3.0.6.tgz</p>
<p>cd memcache-3.0.6&#x2F;</p>
<p>&#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;phpize</p>
<p>.&#x2F;configure –with-php-config&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;php-config</p>
<p>make &amp;&amp; make install</p>
<p>cd ..&#x2F;</p>
<p>cd $cur_dir&#x2F;php-5.2.17&#x2F;ext&#x2F;pdo_mysql&#x2F;</p>
<p>&#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;phpize</p>
<p>.&#x2F;configure –with-php-config&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;php-config –with-pdo-mysql&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql</p>
<p>make &amp;&amp; make install</p>
<p>cd $cur_dir&#x2F;</p>
<p># php extensions</p>
<p>sed -i ‘s#extension_dir &#x3D; “.&#x2F;“#extension_dir &#x3D; “&#x2F;usr&#x2F;local&#x2F;php&#x2F;lib&#x2F;php&#x2F;extensions&#x2F;no-debug-non-zts-20060613&#x2F;“nextension &#x3D; “memcache.so”nextension &#x3D; “pdo_mysql.so”n#’ &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php.ini</p>
<p>sed -i ‘s#output_buffering &#x3D; Off#output_buffering &#x3D; On#’ &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php.ini</p>
<p>sed -i ‘s&#x2F;post_max_size &#x3D; 8M&#x2F;post_max_size &#x3D; 50M&#x2F;g’ &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php.ini</p>
<p>sed -i ‘s&#x2F;upload_max_filesize &#x3D; 2M&#x2F;upload_max_filesize &#x3D; 50M&#x2F;g’ &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php.ini</p>
<p>sed -i ‘s&#x2F;;date.timezone &#x3D;&#x2F;date.timezone &#x3D; PRC&#x2F;g’ &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php.ini</p>
<p>sed -i ‘s&#x2F;short_open_tag &#x3D; Off&#x2F;short_open_tag &#x3D; On&#x2F;g’ &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php.ini</p>
<p>sed -i ‘s&#x2F;; cgi.fix_pathinfo&#x3D;1&#x2F;cgi.fix_pathinfo&#x3D;0&#x2F;g’ &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php.ini</p>
<p>sed -i ‘s&#x2F;; cgi.fix_pathinfo&#x3D;0&#x2F;cgi.fix_pathinfo&#x3D;0&#x2F;g’ &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php.ini</p>
<p>sed -i ‘s&#x2F;max_execution_time &#x3D; 30&#x2F;max_execution_time &#x3D; 300&#x2F;g’ &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php.ini</p>
<p>sed -i ‘s&#x2F;disable_functions &#x3D;.*&#x2F;disable_functions &#x3D; passthru,exec,system,chroot,scandir,chgrp,chown,shell_exec,proc_open,proc_get_status,ini_alter,ini_alter,ini_restore,dl,pfsockopen,openlog,syslog,readlink,symlink,popepassthru,stream_socket_server,fsocket,fsockopen&#x2F;g’ &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php.ini</p>
<p>if [ `getconf WORD_BIT` &#x3D; ‘32’ ] &amp;&amp; [ `getconf LONG_BIT` &#x3D; ‘64’ ] ; then</p>
<p>        wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/web/zend/ZendOptimizer-3.3.9-linux-glibc23-x86_64.tar.gz">http://soft.vpser.net/web/zend/ZendOptimizer-3.3.9-linux-glibc23-x86_64.tar.gz</a></p>
<p>        tar zxvf ZendOptimizer-3.3.9-linux-glibc23-x86_64.tar.gz</p>
<p>mkdir -p &#x2F;usr&#x2F;local&#x2F;zend&#x2F;</p>
<p>cp ZendOptimizer-3.3.9-linux-glibc23-x86_64&#x2F;data&#x2F;5_2_x_comp&#x2F;ZendOptimizer.so &#x2F;usr&#x2F;local&#x2F;zend&#x2F;</p>
<p>else</p>
<p>        wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/web/zend/ZendOptimizer-3.3.9-linux-glibc23-i386.tar.gz">http://soft.vpser.net/web/zend/ZendOptimizer-3.3.9-linux-glibc23-i386.tar.gz</a></p>
<p>tar zxvf ZendOptimizer-3.3.9-linux-glibc23-i386.tar.gz</p>
<p>mkdir -p &#x2F;usr&#x2F;local&#x2F;zend&#x2F;</p>
<p>cp ZendOptimizer-3.3.9-linux-glibc23-i386&#x2F;data&#x2F;5_2_x_comp&#x2F;ZendOptimizer.so &#x2F;usr&#x2F;local&#x2F;zend&#x2F;</p>
<p>fi</p>
<p>cat &gt;&gt;&#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php.ini&lt;&lt;EOF</p>
<p>;eaccelerator</p>
<p>;ionCube</p>
<p>[Zend Optimizer] </p>
<p>zend_optimizer.optimization_level&#x3D;1 </p>
<p>zend_extension&#x3D;”&#x2F;usr&#x2F;local&#x2F;zend&#x2F;ZendOptimizer.so” </p>
<p>EOF</p>
<p>groupadd www</p>
<p>useradd -s &#x2F;sbin&#x2F;nologin -g www www</p>
<p>mkdir -p &#x2F;home&#x2F;wwwroot</p>
<p>chmod +w &#x2F;home&#x2F;wwwroot</p>
<p>mkdir -p &#x2F;home&#x2F;wwwlogs</p>
<p>chmod 777 &#x2F;home&#x2F;wwwlogs</p>
<p>chown -R www:www &#x2F;home&#x2F;wwwroot</p>
<p>rm -f &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php-fpm.conf</p>
<p>cp conf&#x2F;php-fpm.conf &#x2F;usr&#x2F;local&#x2F;php&#x2F;etc&#x2F;php-fpm.conf</p>
<p>wget -c <a target="_blank" rel="noopener" href="http://soft.vpser.net/lnmp/ext/rc.d.php-fpm5.2">http://soft.vpser.net/lnmp/ext/rc.d.php-fpm5.2</a></p>
<p>cp rc.d.php-fpm5.2 &#x2F;etc&#x2F;rc.d&#x2F;php-fpm</p>
<p>chmod +x &#x2F;etc&#x2F;rc.d&#x2F;php-fpm</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;php+eaccelerator install completed&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;nginx install&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>cd $cur_dir</p>
<p>tar zxvf pcre-8.12.tar.gz</p>
<p>cd pcre-8.12&#x2F;</p>
<p>.&#x2F;configure</p>
<p>make &amp;&amp; make install</p>
<p>cd ..&#x2F;</p>
<p>ldconfig</p>
<p>tar zxvf nginx-1.0.15.tar.gz</p>
<p>cd nginx-1.0.15&#x2F;</p>
<p>.&#x2F;configure –user&#x3D;www –group&#x3D;www –prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx –with-http_stub_status_module –with-http_ssl_module –with-http_gzip_static_module –with-ipv6</p>
<p>make &amp;&amp; make install</p>
<p>cd ..&#x2F;</p>
<p>rm -f &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.conf</p>
<p>cd $cur_dir</p>
<p>cp conf&#x2F;nginx.conf &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.conf</p>
<p>cp conf&#x2F;dabr.conf &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;dabr.conf</p>
<p>cp conf&#x2F;discuz.conf &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;discuz.conf</p>
<p>cp conf&#x2F;sablog.conf &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;sablog.conf</p>
<p>cp conf&#x2F;typecho.conf &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;typecho.conf</p>
<p>cp conf&#x2F;wordpress.conf &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;wordpress.conf</p>
<p>cp conf&#x2F;discuzx.conf &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;discuzx.conf</p>
<p>cp conf&#x2F;none.conf &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;none.conf</p>
<p>cp conf&#x2F;wp2.conf &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;wp2.conf</p>
<p>cp conf&#x2F;phpwind.conf &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;phpwind.conf</p>
<p>sed -i ‘s&#x2F;<a target="_blank" rel="noopener" href="http://www.lnmp.org/'$domain'/g">www.lnmp.org/&#39;$domain&#39;/g</a>‘ &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.conf</p>
<p>rm -f &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;fcgi.conf</p>
<p>cp conf&#x2F;fcgi.conf &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;fcgi.conf</p>
<p>cd $cur_dir</p>
<p>cp lnmp &#x2F;root&#x2F;lnmp</p>
<p>chmod +x &#x2F;root&#x2F;lnmp</p>
<p>cp vhost.sh &#x2F;root&#x2F;vhost.sh</p>
<p>chmod +x &#x2F;root&#x2F;vhost.sh</p>
<p>echo “&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;nginx install completed&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;”</p>
<p>#phpinfo</p>
<p>cat &gt;&#x2F;home&#x2F;wwwroot&#x2F;phpinfo.php&lt;&lt;eof</p>
<p>–&gt;</p>
<p>分享： <a href="javascript:;"><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" title="分享到新浪Qing">分享到新浪Qing</a> <a href="javascript:;"><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" title="分享到新浪邮箱"></a></p>
<p><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif">喜欢</p>
<p>–&gt;</p>
<p>阅读_┊_ <a href="#commonComment">评论</a> <em>┊</em> <a href="javascript:;">收藏</a> <em>┊</em><a href="#">转载</a><a href="#"></a> <em>┊</em> <a href="javascript:;">喜欢</a><a href="javascript:;"><strong>▼</strong></a> <em>┊</em><a target="_blank" rel="noopener" href="http://blog.sina.com.cn/main_v5/ria/print.html?blog_id=blog_6c7cb60701014ygd">打印</a><em>┊</em><a href="#">举报</a></p>
<p>已投稿到：</p>
<p> <img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" title="排行榜"> <a target="_blank" rel="noopener" href="http://blog.sina.com.cn/lm/114/113/day.html">排行榜</a> <img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" title="圈子"> <a target="_blank" rel="noopener" href="http://q.sina.com.cn/blog_groups.php?fid=6c7cb60701014ygd">圈子</a></p>
<p>加载中，请稍候……</p>
<p>前一篇：<a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_6c7cb60701014y8a.html">bash script for auto install pptpd server</a></p>
<p>后一篇：<a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_6c7cb60701014zzs.html">关于pacman Tips 小贴士</a></p>
<p><strong>评论</strong> <a target="_blank" rel="noopener" href="http://blog.sina.com.cn/lm/8/2009/0325/105340.html">重要提示：警惕虚假中奖信息</a>       <a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_4bb440080102ef01.html?tj=1">岛国宛如仙境樱花城</a>       <a target="_blank" rel="noopener" href="http://sina.allyes.com/main/adfclick?db=sina&bid=118883,251213,256255&cid=0,0,0&sid=247096&advid=358&camid=19809&show=ignore&url=http://weibo.com/blogkefu">关注每日最热门博客</a> </p>
<p><a href="#post">[发评论]</a></p>
<p>–&gt;*   评论加载中，请稍候…<br>–&gt;</p>
<p><strong>发评论</strong> <a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_4a8a80490102e7zm.html?tj=1">最适合调情西班牙海湾</a>       <a target="_blank" rel="noopener" href="http://sina.allyes.com/main/adfclick?db=sina&bid=118883,251212,256254&cid=0,0,0&sid=247095&advid=358&camid=19809&show=ignore&url=http://weibo.com/blogkefu">关注每日最热门博客</a></p>
<p>登录名： 密码： <a target="_blank" rel="noopener" href="http://login.sina.com.cn/getpass.html">找回密码</a> <a target="_blank" rel="noopener" href="http://login.sina.com.cn/signup/signup.php?entry=blog&src=blogicp&srcuid=1820112391">注册</a> 记住登录状态</p>
<p>昵   称：</p>
<p> <img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif">分享到微博 <img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" title="新">    评论并转载此博文<img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" title="新"></p>
<p>验证码： 请点击后输入验证码 <a href="#">收听验证码</a></p>
<p>匿名评论</p>
<p><a href="javascript:;">发评论</a></p>
<p>以上网友发言只代表其个人观点，不代表新浪网的观点或立场。</p>
<p>&lt; 前一篇<a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_6c7cb60701014y8a.html">bash script for auto install pptpd server</a></p>
<p>后一篇 &gt;<a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_6c7cb60701014zzs.html">关于pacman Tips 小贴士</a></p>
<p>var voteid&#x3D;””;</p>

        
            <div class="donate-container">
    <div class="donate-button">
        <button id="donate-button">donate</button>
    </div>
    <div class="donate-img-container hide" id="donate-img-container">
        <img id="donate-img" src="" data-src="/img/donate.jpg">
        <p> 感谢鼓励 </p>
    </div>
</div>
        
        <div id="comment-container">
        </div>
    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        <li>
            <a target="_blank" href="https://twitter.com/codewalkertse">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-twitter"></i>
                            </span>
            </a>
        </li>
        
        
        <li>
            <a target="_blank" href="https://www.zhihu.com/people/vWi6q3a8">
                            <span class="fa-stack fa-lg">
                                 <i class="iconfont icon-zhihu"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank" href="http://weibo.com/206000504">
                            <span class="fa-stack fa-lg">
                                  <i class="iconfont icon-weibo"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank" href="https://www.facebook.com/codewalkerxie">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-facebook"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank"  href="https://github.com/codewalkertse">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        
        <li>
            <a target="_blank"  href="https://www.linkedin.com/in/simon-xie-11426829">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-linkedin"></i>
                            </span>
            </a>
        </li>
        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a target="_blank" rel="noopener" href="https://codewalker.me">Old blog</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Drive by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> On <a target="_blank" rel="noopener" href="https://www.github.com">GitHub</a> Theme <a target="_blank" rel="noopener" href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
    <h6>
        The value of a man resides in what he gives and not in what he is capable of receiving.
        <br />  
        一个人的价值，在于他贡献了什么，而不在于他能得到什么。
    </h6>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<script src="/js/gitment.js"></script>

<script>
    var gitment = new Gitment({
        id: 'archlinux lnmp 一键安装傻瓜脚本0.0.1',
        owner: 'codewalkertse',
        repo: 'codewalkertse.github.io',
        oauth: {
            client_id: '3cabff4367aa2366b062',
            client_secret: 'cbcd1c72612bd2e6c5a43b4b75d13a46b0d55d4b',
        },
    })
    gitment.render('comment-container')
</script>

</html>
